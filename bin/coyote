#!/usr/bin/env ruby

$: << File.expand_path(File.dirname(__FILE__) + "/../lib")
require 'rubygems'
require 'fileutils'
require 'optparse'
require 'coyote'


options = {}
OptionParser.new do |opts|
  opts.on("-c", "--compressed", "Compress") do |option|
    options[:compress] = option
  end
  opts.on("-w", "--watch", "Watch") do |option|
    options[:watch] = option
  end
  opts.on("-q", "--quiet", "Quiet") do |option|
    options[:quiet] = option
  end
  opts.on("-v", "--verbose", "Verbose") do |option|
    options[:verbose] = option
  end  
end.parse!



case ARGV.first
when 'build'
  ARGV.shift
when 'watch'
  ARGV.shift
  options[:watch] = true  
end

input_path, output_path = ARGV[0].split(':', 2)

Coyote::run(input_path, output_path, options)

